function p(e,t,a,s,o,n,l,r){var i=typeof e=="function"?e.options:e;return t&&(i.render=t,i.staticRenderFns=a,i._compiled=!0),{exports:e,options:i}}const c={mixins:[Fieldtype],mounted(){this.loadGoogleMaps(),this.autocomplete=null,this.map=null,this.marker=null,window.initMap=this.initMap},methods:{loadGoogleMaps(){let e=document.createElement("script");e.setAttribute("src",`https://maps.googleapis.com/maps/api/js?key=${window.geocoder_key}&loading=async&libraries=places&callback=initMap`),e.setAttribute("async",!0),document.head.appendChild(e)},initMap(){var e,t;this.autocomplete=new google.maps.places.Autocomplete(this.$refs.mapfield.$refs.input,{fields:["address_components","geometry","icon","name"]}),this.autocomplete.addListener("place_changed",this.setPlace),this.map=new google.maps.Map(this.$refs.googlemap,{zoom:12,center:{lat:((e=this.value)==null?void 0:e.lat)??39.7684,lng:((t=this.value)==null?void 0:t.lng)??-86.1581},mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1}),this.value&&(this.marker=new google.maps.Marker({draggable:!0,position:new google.maps.LatLng(this.value.lat,this.value.lng),map:this.map}),google.maps.event.addListener(this.marker,"dragend",this.updateMarkerPosition))},setPlace(){const e=this.autocomplete.getPlace(),t=this.getMapComponent(e.address_components,["street_number"]),a=this.getMapComponent(e.address_components,["route"]),s=this.getMapComponent(e.address_components,["locality","political"]),o=this.getMapComponent(e.address_components,["administrative_area_level_1","political"]),n=this.getMapComponent(e.address_components,["postal_code"]);this.update({name:e.name??"",place:this.$refs.mapfield.$refs.input.value??"",lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),address:`${t} ${a}`,city:s,state:o,zip:n}),this.marker&&this.marker.setMap(null),this.marker=new google.maps.Marker({draggable:!0,position:new google.maps.LatLng(e.geometry.location.lat(),e.geometry.location.lng()),map:this.map}),this.map.panTo(this.marker.getPosition()),google.maps.event.addListener(this.marker,"dragend",this.updateMarkerPosition)},updateMarkerPosition(){const e=this.marker.getPosition(),t=this.value;t.lat=e.lat(),t.lng=e.lng(),this.update(t)},getMapComponent(e,t){const a=e.filter(s=>JSON.stringify(s.types)===JSON.stringify(t));return a.length?a[0].short_name:""},reset(){this.update({name:"",place:"",lat:"",lng:"",address:"",city:"",state:"",zip:""})}},data(){var e,t,a,s,o,n,l,r;return{name:(e=this.value)==null?void 0:e.name,place:(t=this.value)==null?void 0:t.place,lat:(a=this.value)==null?void 0:a.lat,lng:(s=this.value)==null?void 0:s.lng,address:(o=this.value)==null?void 0:o.address,city:(n=this.value)==null?void 0:n.city,state:(l=this.value)==null?void 0:l.state,zip:(r=this.value)==null?void 0:r.zip}}};var m=function(){var s,o,n;var t=this,a=t._self._c;return a("div",[a("text-input",{ref:"mapfield",attrs:{value:(s=t.value)==null?void 0:s.place}}),(o=t.value)!=null&&o.place?a("button",{staticClass:"flex btn btn-xs mt-2 gap-2",attrs:{"aria-label":"Reset location"},on:{click:t.reset}},[a("svg-icon",{staticClass:"h-4",attrs:{name:"eraser"}}),a("span",[t._v("Clear location")])],1):t._e(),a("div",{class:{"sr-only":!((n=t.value)!=null&&n.place)}},[a("div",{ref:"googlemap",staticClass:"mt-4 rounded-lg",staticStyle:{height:"500px"}})])],1)},d=[],g=p(c,m,d);const u=g.exports;Statamic.$components.register("geocoder-fieldtype",u);
