function h(e,t,a,l,i,r,p,m){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=a,s._compiled=!0),l&&(s.functional=!0),r&&(s._scopeId="data-v-"+r);var o;if(p?(o=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),i&&i.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(p)},s._ssrRegister=o):i&&(o=m?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(s.functional){s._injectStyles=o;var g=s.render;s.render=function(u,d){return o.call(d),g(u,d)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,o):[o]}return{exports:e,options:s}}const f={mixins:[Fieldtype],mounted(){this.loadGoogleMaps(),this.autocomplete=null,this.map=null,this.marker=null,window.initMap=this.initMap},methods:{loadGoogleMaps(){let e=document.createElement("script");e.setAttribute("src",`https://maps.googleapis.com/maps/api/js?key=${window.geocoder_key}&loading=async&libraries=places&callback=initMap`),e.setAttribute("async",!0),document.head.appendChild(e)},initMap(){this.autocomplete=new google.maps.places.Autocomplete(this.$refs.mapfield.$refs.input,{fields:["address_components","geometry","icon","name"]}),this.autocomplete.addListener("place_changed",this.setPlace),this.map=new google.maps.Map(this.$refs.googlemap,{zoom:12,center:{lat:this.value.lat??39.7684,lng:this.value.lng??-86.1581},mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1}),this.marker=new google.maps.Marker({draggable:!0,position:new google.maps.LatLng(this.value.lat,this.value.lng),map:this.map}),google.maps.event.addListener(this.marker,"dragend",this.updateMarkerPosition)},setPlace(){const e=this.autocomplete.getPlace(),t=this.getMapComponent(e.address_components,["street_number"]),a=this.getMapComponent(e.address_components,["route"]),l=this.getMapComponent(e.address_components,["locality","political"]),i=this.getMapComponent(e.address_components,["administrative_area_level_1","political"]),r=this.getMapComponent(e.address_components,["postal_code"]);this.update({name:e.name??"",place:this.$refs.mapfield.$refs.input.value??"",lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),address:`${t} ${a}`,city:l,state:i,zip:r}),this.marker.setMap(null),this.marker=new google.maps.Marker({draggable:!0,position:new google.maps.LatLng(e.geometry.location.lat(),e.geometry.location.lng()),map:this.map}),this.map.panTo(this.marker.getPosition()),google.maps.event.addListener(this.marker,"dragend",this.updateMarkerPosition)},updateMarkerPosition(){const e=this.marker.getPosition(),t=this.value;t.lat=e.lat(),t.lng=e.lng(),this.update(t)},getMapComponent(e,t){const a=e.filter(l=>JSON.stringify(l.types)===JSON.stringify(t));return a.length?a[0].short_name:""},reset(){this.update({name:"",place:"",lat:"",lng:"",address:"",city:"",state:"",zip:""})}},data(){return{name:this.value.name,place:this.value.place,lat:this.value.lat,lng:this.value.lng,address:this.value.address,city:this.value.city,state:this.value.state,zip:this.value.zip}}};var _=function(){var t=this,a=t._self._c;return a("div",[a("text-input",{ref:"mapfield",attrs:{value:t.value.place}}),t.value.place?a("button",{staticClass:"flex btn btn-xs mt-2 gap-2",attrs:{"aria-label":"Reset location"},on:{click:t.reset}},[a("svg-icon",{staticClass:"h-4",attrs:{name:"eraser"}}),a("span",[t._v("Clear location")])],1):t._e(),a("div",{class:{"sr-only":!t.value.place}},[a("div",{ref:"googlemap",staticClass:"mt-4 rounded-lg",staticStyle:{height:"500px"}})])],1)},v=[],y=h(f,_,v,!1,null,null,null,null);const C=y.exports;Statamic.$components.register("geocoder-fieldtype",C);
